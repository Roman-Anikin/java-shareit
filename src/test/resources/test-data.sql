CREATE TABLE IF NOT EXISTS users (
    user_id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    name varchar,
    email varchar UNIQUE,
    CONSTRAINT user_id_pk PRIMARY KEY (user_id)
);

CREATE TABLE IF NOT EXISTS requests (
    request_id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    description varchar,
    requester_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE ON UPDATE CASCADE,
    create_date TIMESTAMP WITHOUT TIME ZONE,
    CONSTRAINT request_id_pk PRIMARY KEY (request_id)
);

CREATE TABLE IF NOT EXISTS items (
    item_id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    name varchar,
    description varchar,
    is_available BOOLEAN,
    owner_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE ON UPDATE CASCADE,
    request_id INTEGER REFERENCES requests(request_id) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT item_id_pk PRIMARY KEY (item_id)
);

CREATE TABLE IF NOT EXISTS bookings (
    booking_id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    start_date TIMESTAMP WITHOUT TIME ZONE,
    end_date TIMESTAMP WITHOUT TIME ZONE,
    item_id INTEGER NOT NULL REFERENCES items(item_id) ON DELETE CASCADE ON UPDATE CASCADE,
    booker_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE ON UPDATE CASCADE,
    status varchar,
    CONSTRAINT booking_id_pk PRIMARY KEY (booking_id)
);

CREATE TABLE IF NOT EXISTS comments (
    comment_id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    text varchar,
    item_id INTEGER NOT NULL REFERENCES items(item_id) ON DELETE CASCADE ON UPDATE CASCADE,
    author_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE ON UPDATE CASCADE,
    create_date TIMESTAMP WITHOUT TIME ZONE,
    CONSTRAINT comment_id_pk PRIMARY KEY (comment_id)
);